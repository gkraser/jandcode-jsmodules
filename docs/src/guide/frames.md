Фреймы
======

Введение
--------

Приложение `apx` не основывается на клиенском роутинге, как многие. Нет, как таковой,
роутинг присутствует, но не является основным и обязательным механизмом взимодействия с
различными частями приложения.

Вместо клиентского роутинга используются *"фреймы"*.

Представим себе такое стандартное расположение основных элементов страницы:

<div style="display:inline-flex;flex-direction:column;padding:5px;margin:5px;border:1px solid gray">
    <div style="padding:5px;margin:5px;border:1px solid gray">header</div>
    <div style="display:inline-flex;flex-direction:row">
        <div style="padding:5px;margin:5px;border:1px solid gray">menu</div>
        <div style="padding:5px;margin:5px;border:1px solid gray;width:100px;height:100px">main</div>
    </div>
</div>       

В областях "header" и "menu" - управляющие элементы. В области "main" - контент, который
меняется, в зависимости от того, что выбрано в "header" или "main", например щелчек по
какой-то кнопке.

Фрейм как раз и предназначен для того, что бы отображать информацию в "main".

А теперь представим себе диалог. Такую панель, которая содержит что-то, имеет кнопки "ок"
, "отмена". При показе может быть модальным. И т.д.

Фрейм предназначен еще и для того, что бы отображать информацию в диалогах.


Фрейм - это vue-компонент
------------------------- 

Фрейм - это vue-компонент, который __должен__ быть унаследован от `apx.JcFrame`.

Пример простейшего фрейма:

@@code file=EmptyPage.vue


Декораторы фрейма
-----------------

Фрейм должен отрисовывать себя сам полностью. Ему предоставляется некоторая область
экрана (в примере выше это "main") и он ее полностью отрисовывает, включая все оформление,
например заголовки.

Если фрейм используется как диалог, то он должен отрисовать диалог полностью, включая все
кнопки диалога, его заголовок и т.д.

Естественно повторять оформление от фрейма к фрейму мало кому хочется. Поэтому для фрейма
используются декораторы.

Декоратор фрейма - это vue-компонент, который используется в качестве корневого компонента
в шаблоне фрейма.

Пример фрейма с декоратором:

@@code file=SimplePage.vue

Компонент `decor-page` является декоратором фрейма.

По умолчанию для фрейма зарегистрированы следующие декораторы:

* `decor-page` - для фреймов-страниц в "main".
  Компонент-декоратор: `apxUi.JcDecorFramePage`
* `decor-dialog` - для фреймов-диалогов. Компонент-декоратор: `apxUi.JcDecorFrameDialog`

Собственные декораторы
----------------------

Никто не мешает Вам разработать собственные декотораторы и использовать их. В качестве
стартовых примеров можно взять существующие декортаторы.

Правила их написания просты:

* нужно унаследовать компонент от `apx.JcDecorFrame`
* у вас есть ссылка на оформляемый фрейм в свойстве `own`. Его свойства можно использовать
  при оформлении. Например - заголовок фрейма.

Показ фрейма
------------

Функция `apx.showFrame` показывает фрейм как страницу в "main".

```js
apx.showFrame({
    frame: FRAME,
    props: {PROPS},
})
``` 

Параметры:

* `frame` - какой фрейм нужно показать. Может быть компонентом vue, import()-модуля, путем
  в роутинге
* `props` - свойства компонента-фрейма.

Функция `apx.showFrame` асинхронная. Она возвращает Promise, который ресолвится
экземпляром фрейма после показа.

frameInit
---------

Фрейм может иметь опцию-функцию `frameInit`. Функция может быть асинхронной. Эта функция
вызывается перед тем, как фрейм будет показан. В качестве параметра в функцию передается
экземпляр класса `apx.FrameWrapper`.

Цель этой функции - загрузить данные в свойство `FrameWrapper.frameData`, которые затем
можно использовать как данные в работе компонента-фрейма.

Пример:

@@code file=samples1/frontend/src/frames/FrameInit.vue
title=frontend/src/frames/FrameInit.vue

### frameInit не наследуется

`frameInit` не наследуется при наследовании компонентов! В каждом фрейме должен быть
собственный `frameInit`.

Пример:

@@code file=samples1/frontend/src/frames/FrameInit-dialog.vue
title=frontend/src/frames/FrameInit-dialog.vue part=script
                                          
